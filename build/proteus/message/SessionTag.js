// Generated by CoffeeScript 1.10.0
(function() {
  var CBOR, ClassUtil, DecodeError, DontCallConstructor, RandomUtil, SessionTag, TypeUtil;

  CBOR = require('cbor-codec');

  DontCallConstructor = require('../errors/DontCallConstructor');

  ClassUtil = require('../util/ClassUtil');

  TypeUtil = require('../util/TypeUtil');

  DecodeError = require('../errors/DecodeError');

  RandomUtil = require('../util/RandomUtil');

  module.exports = SessionTag = (function() {
    function SessionTag() {
      throw new DontCallConstructor(this);
    }

    SessionTag["new"] = function() {
      var st;
      st = ClassUtil.new_instance(SessionTag);
      st.tag = RandomUtil.random_bytes(16);
      return st;
    };

    SessionTag.prototype.toString = function() {
      return sodium.to_hex(this.tag);
    };

    SessionTag.prototype.encode = function(e) {
      return e.bytes(this.tag);
    };

    SessionTag.decode = function(d) {
      var bytes, st;
      TypeUtil.assert_is_instance(CBOR.Decoder, d);
      bytes = new Uint8Array(d.bytes());
      if (bytes.byteLength !== 16) {
        throw DecodeError.InvalidArrayLen("SessionTag should be 16 bytes, not " + bytes.byteLength + " bytes.");
      }
      st = ClassUtil.new_instance(SessionTag);
      st.tag = new Uint8Array(bytes);
      return st;
    };

    return SessionTag;

  })();

}).call(this);
